
<template>
    <div class="flex flex-col gap-6 p-5 w-full h-full">

        <div class="flex items-center gap-2 justify-left w-full text-secondary">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M2.7936 1.87518C1.29404 1.87518 1.29404 4.12452 2.7936 4.12452H21.2135C22.7145 4.12452 22.7145 1.87518 21.2135 1.87518H2.7936ZM21.2447 10.8754H2.79218C1.23309 10.8144 1.23309 13.214 2.79218 13.1247H21.2121C22.7428 13.1842 22.7726 10.8754 21.2433 10.8754H21.2447ZM2.79218 19.8755C1.29262 19.8755 1.29262 22.1249 2.79218 22.1249H21.2121C22.713 22.1249 22.713 19.8755 21.2121 19.8755H2.79218Z" fill="currentColor"/>
            </svg>
        </div>

        <div class="flex flex-col gap-2 w-full h-full">

            <div class="flex flex-col gap-7 w-full h-full">
                <h1 class="text-2xl text-primary uppercase font-bold text-center">Fresh water</h1>
        
                <div class="flex items-center gap-2 border rounded-full px-3">
                    
                    <input
                        type="text"
                        placeholder="Search fish..."
                        class="w-full h-10 text-secondary py-2 border border-none focus:outline-none focus:ring-0"
                        v-model="search"
                        @input="debounce(searchItem, 500)"
                    />
                    
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                        <path d="M16.7207 15.38L13.5106 12.1794C14.5464 10.8599 15.1083 9.23054 15.1062 7.55312C15.1062 6.05926 14.6633 4.59894 13.8333 3.35684C13.0034 2.11473 11.8237 1.14663 10.4436 0.57495C9.06343 0.00327262 7.54475 -0.146304 6.07958 0.145134C4.61442 0.436573 3.26858 1.15594 2.21226 2.21226C1.15594 3.26858 0.436573 4.61442 0.145134 6.07958C-0.146304 7.54475 0.00327262 9.06343 0.57495 10.4436C1.14663 11.8237 2.11473 13.0034 3.35684 13.8333C4.59894 14.6633 6.05926 15.1062 7.55312 15.1062C9.23054 15.1083 10.8599 14.5464 12.1794 13.5106L15.38 16.7207C15.4678 16.8092 15.5722 16.8795 15.6873 16.9274C15.8023 16.9753 15.9257 17 16.0504 17C16.175 17 16.2984 16.9753 16.4135 16.9274C16.5285 16.8795 16.633 16.8092 16.7207 16.7207C16.8092 16.633 16.8795 16.5285 16.9274 16.4135C16.9753 16.2984 17 16.175 17 16.0504C17 15.9257 16.9753 15.8023 16.9274 15.6873C16.8795 15.5722 16.8092 15.4678 16.7207 15.38ZM1.88828 7.55312C1.88828 6.43272 2.22052 5.33749 2.84298 4.40591C3.46544 3.47433 4.35017 2.74825 5.38528 2.31949C6.4204 1.89074 7.55941 1.77855 8.65828 1.99713C9.75715 2.21571 10.7665 2.75523 11.5588 3.54748C12.351 4.33972 12.8905 5.3491 13.1091 6.44797C13.3277 7.54684 13.2155 8.68585 12.7868 9.72097C12.358 10.7561 11.6319 11.6408 10.7003 12.2633C9.76876 12.8857 8.67352 13.218 7.55312 13.218C6.05072 13.218 4.60984 12.6211 3.54748 11.5588C2.48511 10.4964 1.88828 9.05553 1.88828 7.55312Z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            
            <template v-if="suggestions.length > 0 && search.length > 0">
                <div class="flex flex-col w-full h-full border rounded">
                    <template v-for="suggestion in suggestions">
    
                        <div class="flex items-center gap-2 px-3 py-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="9" height="9" viewBox="0 0 9 9" fill="none">
                                <path d="M8.85215 8.14238L7.1527 6.44792C7.70101 5.74938 7.99853 4.88675 7.99742 3.99871C7.99742 3.20784 7.7629 2.43473 7.32352 1.77715C6.88414 1.11956 6.25962 0.607038 5.52895 0.304386C4.79828 0.00173257 3.99428 -0.0774552 3.2186 0.0768359C2.44293 0.231127 1.73043 0.611967 1.1712 1.1712C0.611967 1.73043 0.231127 2.44293 0.0768359 3.2186C-0.0774552 3.99428 0.00173257 4.79828 0.304386 5.52895C0.607038 6.25962 1.11956 6.88414 1.77715 7.32352C2.43473 7.7629 3.20784 7.99742 3.99871 7.99742C4.88675 7.99853 5.74938 7.70101 6.44792 7.1527L8.14238 8.85215C8.18884 8.899 8.24413 8.93618 8.30504 8.96156C8.36595 8.98694 8.43128 9 8.49726 9C8.56325 9 8.62858 8.98694 8.68949 8.96156C8.7504 8.93618 8.80568 8.899 8.85215 8.85215C8.899 8.80568 8.93618 8.7504 8.96156 8.68949C8.98694 8.62858 9 8.56325 9 8.49726C9 8.43128 8.98694 8.36595 8.96156 8.30504C8.93618 8.24413 8.899 8.18884 8.85215 8.14238ZM0.99968 3.99871C0.99968 3.40556 1.17557 2.82573 1.50511 2.33254C1.83465 1.83935 2.30303 1.45496 2.85103 1.22797C3.39903 1.00098 4.00204 0.941587 4.5838 1.05731C5.16555 1.17302 5.69993 1.45865 6.11935 1.87808C6.53877 2.2975 6.8244 2.83188 6.94012 3.41363C7.05584 3.99539 6.99645 4.59839 6.76946 5.14639C6.54247 5.6944 6.15808 6.16278 5.66489 6.49232C5.1717 6.82186 4.59187 6.99775 3.99871 6.99775C3.20332 6.99775 2.4405 6.68178 1.87808 6.11935C1.31565 5.55692 0.99968 4.79411 0.99968 3.99871Z" fill="#8E8E8E"/>
                            </svg>
                            <span class="text-sm text-secondary">{{ suggestion.name }}</span>
                        </div>
    
                    </template>
                </div>
            </template>
            
        </div>

    </div>
</template>


<script>
import { getSearchSuggestions } from '@/API/index.js'


export default {
    name: "SearchView",
    data() {
        return {
            category: "marine",
            search: "",
            suggestions: [],
        }
    },
    methods: {
        async searchItem() {
            try {
                const res = await getSearchSuggestions(this.category ,this.search)
                this.suggestions = res.data
            } catch (error) {
                console.log(error)
            }
        },

        debounce(func, wait) {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), wait);
            };
        }
    }
};
</script>
